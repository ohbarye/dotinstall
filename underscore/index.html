<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="ja">
  <title>underscore.js</title>
</head>
<body>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script type="text/coffeescript">
    do ->
      ### 02
      # x = _.shuffle([1,3,5,7])
      x = _([1,3,5,7]).shuffle()
      console.log(x)
      ###

      ### 03
      ar = [2,5,8]
      _.each(ar, (num) ->
        console.log(num*2)
      )

      x = _.map(ar, (num) -> num*2)
      console.log(x)
      ###

      ### 04
      a = [2,5,8,42,12]
      x = _.find(a, (num) -> num > 5)
      console.log(x)
      x = _.filter(a, (num) -> num > 5)
      console.log(x)
      console.log(_.contains(a, 5))
      ###

      ### 05
      a = [1,2,5,8,42,12]
      x = _.groupBy(a, (num) ->
        num % 3
      )
      x = _.countBy(a, (num) ->
        return num % 2 == 0 ? "even" : "odd"
      )
      x = _.sortBy(a, (num) -> Math.sin(num))
      x = _.sortBy(["me","I","you"], "length")
      console.log(x)
      ###

      ### 06
      a = [1,2,5]
      b = [5,2,8]

      x = _.union(a,b)
      console.log(x)

      x = _.intersection(a,b)
      console.log(x)

      x = _.difference(a,b)
      console.log(x)

      x = _.uniq([1,2,3,2])
      console.log(x)
      ###

      ### 07
      user = {
        name: "taguchi"
        score: 98
        web: "ohba"
      }

      console.log(x = _.keys(user))
      console.log(_.values(user))
      console.log(_.invert(user))
      console.log(_.has(user,"name"))
      ###

      ### 08
      console.log(_.range(1,11))
      console.log(_.random(10))
      console.log(_.escape('<script>'))
      _(5).times( -> console.log("Hello"))
      ###

      ### 09
      x = _.chain([1,2,5,8])
            .shuffle()
            .map((num) -> return num * 2)
            .value()
      console.log(x)
      ###

      ## 10
      user = {
        name: "taguchi"
        score: 98
        web: "ohba"
      }

      # <% %>   control flow
      # <%= %>  display without escape
      # <%- %>  display with escape
      tpl = "<% console.log('hello from tpl') %> <li><%- name %> (<%- score %>)</li>"
      x = _.template(tpl)
      console.log(x(user))
      ##


  </script>
  <script type="text/javascript" src="http://coffeescript.org/extras/coffee-script.js"></script>
</body>
</html>
